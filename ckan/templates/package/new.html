<html xmlns:py="http://genshi.edgewall.org/"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  py:strip="">
  
  <py:def function="page_title">New - Data Packages</py:def>
  <py:def function="page_heading">Register a New Data Package</py:def>

  <py:def function="body_class">hide-sidebar</py:def>

  <py:def function="optional_head">
    <!-- Reveal instructions --> 
    <script type="text/javascript" src="${g.site_url}/scripts/reveal_instructions.js"></script> 
    <link rel="stylesheet" href="${g.site_url}/css/reveal_instructions.css" /> 

    <!-- Flexitable --> 
    <script type="text/javascript" src="${g.site_url}/scripts/flexitable.js"></script> 
    <link rel="stylesheet" href="${g.site_url}/css/flexitable.css" /> 

    <!-- Auto-generate 'name' field -->
    <script type="text/javascript">
       jQuery(document).ready(function($) {
         CKAN.Utils.PackageSlugCreator.create($('#title'), $('#name'));
         if (!$('#preview').length) {
           $("#title").focus();
         }
       });
     </script>
  </py:def>

  <div py:match="content">
    <div id="preview" style="margin-left: 20px;" py:if="c.preview">
      <hr />
      <h2>Preview</h2>
      <div style="border: 2px dashed red; padding: 5px;"> 
        ${c.preview}
      </div>
    </div>

    <h3 py:if="c.error" class="form-errors">
      Error: ${c.error}
    </h3>

    ${h.literal(c.form)}

  </div>

  <xi:include href="layout.html" />
</html>

